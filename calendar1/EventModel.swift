// EventModel.swift
// 共有 Event モデルはビューとマネージャー全体で使用されます

import Foundation

// ========================================
// Event 構造体
// ========================================
// - 予定（イベント）の情報を保持する主要なデータ構造体です。
// - このモデルはアプリ全体（ContentView、ICalManager、EventSearchView など）で参照されます。

// ========================================
// Identifiable プロトコル準拠
// ========================================
// - ForEach など、SwiftUI がビュー内でユニークに識別できるようにするためのプロトコル。
// - `id` プロパティ（UUID 型）を必須にしています。

// ========================================
// Codable プロトコル準拠
// ========================================
// - JSONエンコード・デコードの自動生成を可能にするプロトコル。
// - UserDefaults や JSONEncoder/JSONDecoder で簡単にシリアライズできます。

// ========================================
// Equatable プロトコル準拠
// ========================================
// - Event 同士を == で比較可能にするプロトコル。
// - 通常は自動生成されます（全てのプロパティが Equatable なため）。

struct Event: Identifiable, Codable, Equatable {
    // ========================================
    // id: UUID
    // ========================================
    // - 予定のユニークな識別子。
    // - UUID（Universally Unique Identifier）は衝突の可能性が極めて低い値です。
    // - 修正後も同じ id を保つことで、ファイル保存時に同じ予定として認識されます。
    var id: UUID
    
    // ========================================
    // title: String
    // ========================================
    // - 予定の名前・タイトル。
    // - 例："会議"、"ランチ"、"ジム"
    var title: String
    
    // ========================================
    // startTime: Date
    // ========================================
    // - 予定の開始日時。
    // - Date は年月日と時刻を含みます。
    var startTime: Date
    
    // ========================================
    // endTime: Date
    // ========================================
    // - 予定の終了日時。
    // - startTime より後である必要があります（通常はバリデーションで確認）。
    var endTime: Date
    
    // ========================================
    // categoryID: String?
    // ========================================
    // - 予定が属するカテゴリの ID。
    // - nil の場合は「未分類」を意味します。
    // - CategoryManager で管理されるカテゴリの id と一致します。
    var categoryID: String?

    // ========================================
    // init イニシャライザ
    // ========================================
    // - Event インスタンスを作成するメソッド。
    // - すべてのパラメータがデフォルト値を持つため、必要な部分だけ指定できます。
    
    // id デフォルト値: UUID()
    //   - 新しい UUID を自動生成します。ファイル読み込み時には外部から指定されます。
    // categoryID デフォルト値: nil
    //   - 初期状態では未分類です。
    init(id: UUID = UUID(), title: String, startTime: Date, endTime: Date, categoryID: String? = nil) {
        self.id = id
        self.title = title
        self.startTime = startTime
        self.endTime = endTime
        self.categoryID = categoryID
    }
}
